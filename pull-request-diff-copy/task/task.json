{
    "id": "bbdc143b-c004-4266-8e12-b6481cc22d5a",
    "name": "Pull Request Diff Copy",
    "friendlyName": "Pull Request Diff Copy",
    "description": "Copy all changes in a Pull Request into a Diff folder",
    "helpMarkDown": "Copy all changes in a Pull Request into a Diff folder. This task must trigge by git pull request, [set target branch policy at first](https://docs.microsoft.com/zh-cn/vsts/git/branch-policies?view=vsts#require-the-pull-request-to-build)",
    "category": "Utility",
    "visibility": [
        "Build",
        "Release"
    ],
    "author": "LEANSOFT",
    "version": {
        "Major": 0,
        "Minor": 1,
        "Patch": 21
    },
   "minimumAgentVersion": "1.95.0",
	"instanceNameFormat": "Pull Request Diff Copy $(message)",
	"inputs": [
		{
				"name": "destination",
				"type": "string",
				"label": "Destination",
				"defaultValue": "$(Build.ArtifactStagingDirectory)/diff",
				"required": true,
				"helpMarkDown": "The directory where files should be placed, a subfolder named [Content] will be placed to contain the files. And [diff.txt] will be created in the root."
		},	
		{
			"name": "flatten",
			"type": "boolean",
			"label": "Flatten",
			"defaultValue": false,
			"required": false,
			"helpMarkDown": "Flatten directory structure (all files to same directory)"
		}
	],
	"execution": {
		"PowerShell3": {
			"target": "get-changes-files.ps1"
		}
	}
}